{"ast":null,"code":"// widget/src/components/Ticker.jsx\nimport React,{useState,useEffect,useRef}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const Ticker=_ref=>{let{config,flightStatusUpdates}=_ref;const[currentText,setCurrentText]=useState(config.userTicker);const[showUserTicker,setShowUserTicker]=useState(true);const tickerRef=useRef(null);const animationRef=useRef(null);const positionRef=useRef(0);useEffect(()=>{if(tickerRef.current){startAnimation();}return()=>{if(animationRef.current){cancelAnimationFrame(animationRef.current);}};},[config.userTickerDirection,config.userTickerSpeed]);useEffect(()=>{// Update ticker text based on configuration\nupdateTickerText();},[config,flightStatusUpdates,showUserTicker]);const updateTickerText=()=>{if(config.showDefaultTicker&&flightStatusUpdates.length>0){if(showUserTicker){setCurrentText(config.userTicker);}else{// Rotate through flight status updates\nconst randomIndex=Math.floor(Math.random()*flightStatusUpdates.length);setCurrentText(flightStatusUpdates[randomIndex]);}}else{setCurrentText(config.userTicker);}};const startAnimation=()=>{const tickerText=tickerRef.current;if(!tickerText)return;const containerWidth=window.innerWidth;const textWidth=tickerText.offsetWidth;// Reset position based on direction\npositionRef.current=config.userTickerDirection===\"left\"?containerWidth:-textWidth;const animate=()=>{if(config.userTickerDirection===\"left\"){positionRef.current-=config.userTickerSpeed/10;if(positionRef.current<-textWidth){positionRef.current=containerWidth;// Switch between user ticker and flight updates\nif(config.showDefaultTicker&&flightStatusUpdates.length>0){setShowUserTicker(prev=>!prev);}}}else{positionRef.current+=config.userTickerSpeed/10;if(positionRef.current>containerWidth){positionRef.current=-textWidth;// Switch between user ticker and flight updates\nif(config.showDefaultTicker&&flightStatusUpdates.length>0){setShowUserTicker(prev=>!prev);}}}if(tickerText){tickerText.style.transform=`translateX(${positionRef.current}px)`;}animationRef.current=requestAnimationFrame(animate);};animationRef.current=requestAnimationFrame(animate);};return/*#__PURE__*/_jsx(\"div\",{id:\"ticker\",children:/*#__PURE__*/_jsx(\"span\",{id:\"ticker-text\",ref:tickerRef,style:{whiteSpace:'nowrap',display:'inline-block',transform:`translateX(${positionRef.current}px)`},children:currentText})});};export default Ticker;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","Ticker","_ref","config","flightStatusUpdates","currentText","setCurrentText","userTicker","showUserTicker","setShowUserTicker","tickerRef","animationRef","positionRef","current","startAnimation","cancelAnimationFrame","userTickerDirection","userTickerSpeed","updateTickerText","showDefaultTicker","length","randomIndex","Math","floor","random","tickerText","containerWidth","window","innerWidth","textWidth","offsetWidth","animate","prev","style","transform","requestAnimationFrame","id","children","ref","whiteSpace","display"],"sources":["C:/Users/c.pulawski/workspace/pirs-react-app/widget/src/components/Ticker.jsx"],"sourcesContent":["// widget/src/components/Ticker.jsx\r\nimport React, { useState, useEffect, useRef } from 'react';\r\n\r\nconst Ticker = ({ config, flightStatusUpdates }) => {\r\n  const [currentText, setCurrentText] = useState(config.userTicker);\r\n  const [showUserTicker, setShowUserTicker] = useState(true);\r\n  const tickerRef = useRef(null);\r\n  const animationRef = useRef(null);\r\n  const positionRef = useRef(0);\r\n\r\n  useEffect(() => {\r\n    if (tickerRef.current) {\r\n      startAnimation();\r\n    }\r\n\r\n    return () => {\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n      }\r\n    };\r\n  }, [config.userTickerDirection, config.userTickerSpeed]);\r\n\r\n  useEffect(() => {\r\n    // Update ticker text based on configuration\r\n    updateTickerText();\r\n  }, [config, flightStatusUpdates, showUserTicker]);\r\n\r\n  const updateTickerText = () => {\r\n    if (config.showDefaultTicker && flightStatusUpdates.length > 0) {\r\n      if (showUserTicker) {\r\n        setCurrentText(config.userTicker);\r\n      } else {\r\n        // Rotate through flight status updates\r\n        const randomIndex = Math.floor(Math.random() * flightStatusUpdates.length);\r\n        setCurrentText(flightStatusUpdates[randomIndex]);\r\n      }\r\n    } else {\r\n      setCurrentText(config.userTicker);\r\n    }\r\n  };\r\n\r\n  const startAnimation = () => {\r\n    const tickerText = tickerRef.current;\r\n    if (!tickerText) return;\r\n\r\n    const containerWidth = window.innerWidth;\r\n    const textWidth = tickerText.offsetWidth;\r\n    \r\n    // Reset position based on direction\r\n    positionRef.current = config.userTickerDirection === \"left\" \r\n      ? containerWidth \r\n      : -textWidth;\r\n\r\n    const animate = () => {\r\n      if (config.userTickerDirection === \"left\") {\r\n        positionRef.current -= config.userTickerSpeed / 10;\r\n        if (positionRef.current < -textWidth) {\r\n          positionRef.current = containerWidth;\r\n          // Switch between user ticker and flight updates\r\n          if (config.showDefaultTicker && flightStatusUpdates.length > 0) {\r\n            setShowUserTicker(prev => !prev);\r\n          }\r\n        }\r\n      } else {\r\n        positionRef.current += config.userTickerSpeed / 10;\r\n        if (positionRef.current > containerWidth) {\r\n          positionRef.current = -textWidth;\r\n          // Switch between user ticker and flight updates\r\n          if (config.showDefaultTicker && flightStatusUpdates.length > 0) {\r\n            setShowUserTicker(prev => !prev);\r\n          }\r\n        }\r\n      }\r\n\r\n      if (tickerText) {\r\n        tickerText.style.transform = `translateX(${positionRef.current}px)`;\r\n      }\r\n\r\n      animationRef.current = requestAnimationFrame(animate);\r\n    };\r\n\r\n    animationRef.current = requestAnimationFrame(animate);\r\n  };\r\n\r\n  return (\r\n    <div id=\"ticker\">\r\n      <span \r\n        id=\"ticker-text\" \r\n        ref={tickerRef}\r\n        style={{ \r\n          whiteSpace: 'nowrap',\r\n          display: 'inline-block',\r\n          transform: `translateX(${positionRef.current}px)`\r\n        }}\r\n      >\r\n        {currentText}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Ticker;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}